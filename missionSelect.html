<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoPE</title>

    <link href="slick/slick.css" rel="stylesheet" type="text/css">
    <link href="slick/slick-theme.css" rel="stylesheet" type="text/css">
    <link href="missionSelect.css" rel="stylesheet" type="text/css">

    <!--CSS-->
    <link rel="stylesheet" type="text/css" href="generalDesign.css">
    <link rel="stylesheet" type="text/css" href="unityRelated/unity.css">

    <script src="mission.js"></script>

</head>

<body>
    <div class="LTicons">
        <input class="icon" type="image" src="svg/arrow.svg" onclick="location.href='./index.html'">
    </div>

    <div class="basic_stage">
        <h2 class="basic">Basic</h2>
        <progress value="0" max="100" style="overflow: hidden;"></progress>
        <div class="slide">
            <div class="mission_slide">
                <div class="slideContent" id="basic_level1">
                    <h2>level1</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <p>Go through the checkpoint.</p>
                    <input type="image" src="unityRelated/PartImage/b1.png" class="MissionImage" onclick="makeURL('basic_level1')">
                </div>

                <div class="slideContent" id="basic_level2">
                    <h2>level2</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <p>Go through the checkpoint.</p>
                    <input type="image" src="unityRelated/PartImage/b2.png" class="MissionImage" onclick="makeURL('basic_level2')">
                </div>

                <div class="slideContent" id="basic_level3">
                    <h2>level3</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <p>Go through the checkpoint.</p>
                    <input type="image" src="unityRelated/PartImage/b3.png" class="MissionImage" onclick="makeURL('basic_level3')">
                </div>

                <div class="slideContent" id="basic_level4">
                    <h2>level4</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <p>Go through the checkpoint.</p>
                    <input type="image" src="unityRelated/PartImage/b4.png" class="MissionImage" onclick="makeURL('basic_level4')">
                </div>
            </div>
        </div>
    </div>


    <div class="line_tracking_stage">
        <h2 class="basic">Line Tracking</h2>
        <progress value="0" max="100" style="overflow: hidden;"></progress>
        <div class="slide">
            <div class="mission_slide" style="background: rgba(10, 1, 1, 0.61);">
                <div class="slideContent" id="line_tracking_level1">
                    <h2>level1</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/l1.png" class="MissionImage" onclick="makeURL('line_tracking_level1')">
                </div>

                <div class="slideContent" id="line_tracking_level2">
                    <h2>level2</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/l2.png" class="MissionImage" onclick="makeURL('line_tracking_level2')">
                </div>

                <div class="slideContent" id="line_tracking_level3">
                    <h2>level3</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/l3.png" class="MissionImage" onclick="makeURL('line_tracking_level3')">
                </div>

                <div class="slideContent" id="line_tracking_level4">
                    <h2>level4</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/l4.png" class="MissionImage" onclick="makeURL('line_tracking_level4')">
                </div>

                <div class="slideContent" id="line_tracking_level5">
                    <h2>level5</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/l5.png" class="MissionImage" onclick="makeURL('line_tracking_level5')">
                </div>

                <div class="slideContent" id="line_tracking_level6">
                    <h2>level6</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/l6.png" class="MissionImage" onclick="makeURL('line_tracking_level6')">
                </div>
            </div>
        </div>
    </div>

    <div class="maze_stage">
        <h2>Maze</h2>
        <progress value="0" max="100" style="overflow: hidden;"></progress>
        <div class="slide">
            <div class="mission_slide" style="background: rgba(10, 1, 1, 0.61);">
                <div class="slideContent" id="maze_level1">
                    <h2>level1</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m1.png" class="MissionImage" onclick="makeURL('maze_level1')">
                </div>

                <div class="slideContent" id="maze_level2">
                    <h2>level2</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m2.png" class="MissionImage" onclick="makeURL('maze_level2')">
                </div>

                <div class="slideContent" id="maze_level3">
                    <h2>level3</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m3.png" class="MissionImage" onclick="makeURL('maze_level3')">
                </div>

                <div class="slideContent" id="maze_level4">
                    <h2>level4</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m4.png" class="MissionImage" onclick="makeURL('maze_level4')">
                </div>

                <div class="slideContent" id="maze_level5">
                    <h2>level5</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m5.png" class="MissionImage" onclick="makeURL('maze_level5')">
                </div>

                <div class="slideContent" id="maze_level6">
                    <h2>level6</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m6.png" class="MissionImage" onclick="makeURL('maze_level6')">
                </div>

                <div class="slideContent" id="maze_level7">
                    <h2>level7</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m7.png" class="MissionImage" onclick="makeURL('maze_level7')">
                </div>

                <div class="slideContent" id="maze_level8">
                    <h2>level8</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m8.png" class="MissionImage" onclick="makeURL('maze_level8')">
                </div>

                <div class="slideContent" id="maze_level9">
                    <h2>level9</h2>
                    <p id="tim">Time : 0.0</p>
                    <p id="rlt">Not achieved</p>
                    <input type="image" src="unityRelated/PartImage/m9.png" class="MissionImage" onclick="makeURL('maze_level9')">
                </div>
            </div>
        </div>
    </div>





    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="slick/slick.min.js"></script>
    <script>
        let basic_clear = 0;
        let line_clear = 0;
        let maze_clear = 0;
        var mjson = JSON.parse(localStorage.getItem("MissionDataContainer"));
        for (var m in mjson) {

            $("#" + mjson[m].name).find('#tim').text("time : " + mjson[m].time);
            $("#" + mjson[m].name).find('#rlt').text(mjson[m].rlt);

            if (mjson[m].rlt == "clear") {
                $("#" + mjson[m].name).find('.MissionImage').css('background', 'lightgreen');
                $("#" + mjson[m].name).find('#rlt').css("color", "green");

                if (mjson[m].name.indexOf("basic") > -1) basic_clear++;
                if (mjson[m].name.indexOf("line") > -1) line_clear++;
                if (mjson[m].name.indexOf("maze") > -1) maze_clear++;

            }
            if (mjson[m].rlt == "failed") {
                $("#" + mjson[m].name).find('.MissionImage').css('background', 'red');
                $("#" + mjson[m].name).find('#rlt').css("color", "red");
            }
        }
        $(".basic_stage").find("progress").val((basic_clear / 4 * 100).toString());
        $(".line_tracking_stage").find("progress").val((line_clear / 6 * 100).toString());
        $(".maze_stage").find("progress").val((maze_clear / 9 * 100).toString());


        if ((basic_clear / 4 * 100) > 60) {
            
            $(".line_tracking_stage").find(".mission_slide").css("background", "#fff");

            if ((line_clear / 6 * 100) > 60) {
                $(".maze_stage").find(".mission_slide").css("background", "#fff");
            }
        }

        $('.mission_slide').slick({
            infinite: false,
            centerMode: true,
            dots: true,
        });
        var url = "mission.html";

        function makeURL(missionName) {
            if (missionName.indexOf("line_tracking") > -1) {
                if ((basic_clear / 4 * 100) <= 60) {
                    return;
                }
            }
            if (missionName.indexOf("maze_") > -1) {
                if ((line_clear / 6 * 100) <= 60) {
                    return;
                }
            }
            url += "?" + missionName + "&robo3&script";
            location.href = url;
        }
    </script>
    <script src="generalJS.js"></script>
</body>

</html>